(()=>{var e={};e.id=332,e.ids=[220,332,636],e.modules={170:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{A:()=>c});var a=s(8732),i=s(2015),o=s(4774),n=s(6919),l=e([n]);n=(l.then?(await l)():l)[0];let c=({show:e,onClose:t,product:s,onSave:r})=>{let[l,c]=(0,i.useState)(!1),d=async e=>{try{c(!0),await r(e),t()}finally{c(!1)}};return(0,a.jsx)(o.A,{show:e,onClose:t,title:s?"Edit Produk":"Tambah Produk",size:"lg",children:(0,a.jsx)(n.A,{onSubmit:d,defaultValues:s||void 0,isLoading:l})})};r()}catch(e){r(e)}})},361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},579:(e,t,s)=>{"use strict";s.d(t,{i:()=>a});var r=s(2572);let a=async e=>(0,r.G)("http://localhost:5050/api/auth/login","",{method:"POST",body:JSON.stringify(e)})},979:()=>{},1279:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{config:()=>g,default:()=>u,getServerSideProps:()=>h,getStaticPaths:()=>x,getStaticProps:()=>m,reportWebVitals:()=>p,routeModule:()=>w,unstable_getServerProps:()=>j,unstable_getServerSideProps:()=>v,unstable_getStaticParams:()=>b,unstable_getStaticPaths:()=>f,unstable_getStaticProps:()=>y});var a=s(3885),i=s(237),o=s(1413),n=s(1779),l=s(2081),c=s(2711),d=e([l,c]);[l,c]=d.then?(await d)():d;let u=(0,o.M)(c,"default"),m=(0,o.M)(c,"getStaticProps"),x=(0,o.M)(c,"getStaticPaths"),h=(0,o.M)(c,"getServerSideProps"),g=(0,o.M)(c,"config"),p=(0,o.M)(c,"reportWebVitals"),y=(0,o.M)(c,"unstable_getStaticProps"),f=(0,o.M)(c,"unstable_getStaticPaths"),b=(0,o.M)(c,"unstable_getStaticParams"),j=(0,o.M)(c,"unstable_getServerProps"),v=(0,o.M)(c,"unstable_getServerSideProps"),w=new a.PagesRouteModule({definition:{kind:i.A.PAGES,page:"/index",pathname:"/",bundlePath:"",filename:""},components:{App:l.default,Document:n.default},userland:c});r()}catch(e){r(e)}})},1440:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{A:()=>d});var a=s(2015),i=s(4233),o=s(9964),n=s(579),l=s(4255),c=e([l]);l=(c.then?(await c)():c)[0];let d=()=>{let[e,t]=(0,a.useState)(!1),s=(0,i.useRouter)(),{showSuccess:r,showError:c}=(0,l.d)();return{login:async e=>{t(!0);try{let{token:t}=await (0,n.i)(e);(0,o.setCookie)(null,"token",t,{maxAge:86400,path:"/"}),r("Login successful!"),s.push("/")}catch(e){c(e.message||"Login failed")}finally{t(!1)}},logout:()=>{(0,o.destroyCookie)(null,"token"),s.push("/login")},isLoading:e}};r()}catch(e){r(e)}})},1510:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{Q:()=>l});var a=s(9833),i=s(4078),o=s(4255),n=e([i,o]);[i,o]=n.then?(await n)():n;let l=e=>{let{showError:t,showSuccess:s}=(0,o.d)(),{data:r,error:n,mutate:l}=(0,i.default)(e?["http://localhost:5050/api/products",e]:null,()=>(0,a.d$)(e)),c=async r=>{try{return await (0,a.WY)(r,e),s("Product Successfully created!"),l(),!0}catch(e){return t(e.message),!1}},d=async(r,i)=>{try{return await (0,a.vc)(r,i,e),s("Product Successfully edited!"),l(),!0}catch(e){return t(e.message),!1}},u=async r=>{try{return await (0,a.DD)(r,e),s("Product Successfully deleted!"),l(),!0}catch(e){return t(e.message),!1}};return{products:r||[],isLoading:!r&&!n,error:n,createProduct:c,updateProduct:d,deleteProduct:u}};r()}catch(e){r(e)}})},1779:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(8732),a=s(2341);function i(){return(0,r.jsxs)(a.Html,{lang:"en",children:[(0,r.jsx)(a.Head,{}),(0,r.jsxs)("body",{className:"antialiased",children:[(0,r.jsx)(a.Main,{}),(0,r.jsx)(a.NextScript,{})]})]})}},2015:e=>{"use strict";e.exports=require("react")},2081:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>n});var a=s(8732);s(979);var i=s(4391),o=e([i]);function n({Component:e,pageProps:t}){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(e,{...t}),(0,a.jsx)(i.ToastContainer,{})]})}i=(o.then?(await o)():o)[0],r()}catch(e){r(e)}})},2326:e=>{"use strict";e.exports=require("react-dom")},2572:(e,t,s)=>{"use strict";s.d(t,{G:()=>r});let r=async(e,t="",s={})=>{let r={"Content-Type":"application/json"};t&&(r.Authorization=`Bearer ${t}`);let a=await fetch(e,{...s,headers:{...r,...s.headers}}),i=await a.json();if(!a.ok)throw Error(i.message||"An error occurred");return i}},2711:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.r(t),s.d(t,{default:()=>p,getServerSideProps:()=>y});var a=s(8732),i=s(9964),o=s(2015),n=s(1440),l=s(1510),c=s(7666),d=s(5981),u=s(6715),m=s(170),x=s(5462),h=s(4255),g=e([n,l,m,h]);function p({token:e}){let{logout:t}=(0,n.A)(),{showError:s}=(0,h.d)(),{products:r,isLoading:i,createProduct:g,updateProduct:p,deleteProduct:y}=(0,l.Q)(e),[f,b]=(0,o.useState)(!1),[j,v]=(0,o.useState)(null),[w,N]=(0,o.useState)(!1),[S,k]=(0,o.useState)(null),A=async e=>{try{j?await p(j.code,e):await g(e),b(!1)}catch(e){s(e.message||"Failed to save product")}},P=async()=>{try{S&&(await y(S),N(!1))}catch(e){s(e.message||"Failed to delete product")}};return(0,a.jsxs)(c.A,{children:[(0,a.jsx)(d.A,{title:"Daftar Produk",actions:[{label:"Tambah Produk",onClick:()=>{v(null),b(!0)},variant:"primary"},{label:"Logout",onClick:t,variant:"danger"}]}),(0,a.jsx)(u.A,{products:r,isLoading:i,onEdit:e=>{v(e),b(!0)},onDelete:e=>{k(e),N(!0)}}),(0,a.jsx)(m.A,{show:f,onClose:()=>b(!1),product:j,onSave:A}),(0,a.jsx)(x.A,{show:w,onClose:()=>N(!1),onConfirm:P,title:"Hapus Produk",message:`Apakah Anda yakin ingin menghapus produk ${S}?`})]})}[n,l,m,h]=g.then?(await g)():g;let y=async e=>{let{token:t}=(0,i.parseCookies)(e);return t?{props:{token:t}}:{redirect:{destination:"/login",permanent:!1}}};r()}catch(e){r(e)}})},2971:e=>{"use strict";e.exports=import("zod")},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},4078:e=>{"use strict";e.exports=import("swr")},4255:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{d:()=>n});var a=s(4391),i=e([a]);a=(i.then?(await i)():i)[0];let o={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},n=()=>({showSuccess:(e,t={})=>{a.toast.success(e,{...o,...t})},showError:(e,t={})=>{a.toast.error(e,{...o,...t})},showInfo:(e,t={})=>{a.toast.info(e,{...o,...t})},showWarning:(e,t={})=>{a.toast.warn(e,{...o,...t})}});r()}catch(e){r(e)}})},4391:e=>{"use strict";e.exports=import("react-toastify")},4774:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(8732),a=s(2015);let i=({show:e,onClose:t,title:s,children:i,size:o="md"})=>((0,a.useEffect)(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[e]),e)?(0,r.jsxs)("div",{className:"fixed inset-0",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:t}),(0,r.jsx)("div",{className:`z-50 absolute top-2/5 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg text-left overflow-hidden shadow-xl transition-all sm:my-8 sm:align-middle ${{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"}[o]} w-full`,children:(0,r.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,r.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:s}),i]})})]}):null},5462:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(8732),a=s(2015),i=s(4774),o=s(6346);let n=({show:e,onClose:t,onConfirm:s,title:n,message:l,confirmText:c="Hapus",cancelText:d="Batal"})=>{let[u,m]=(0,a.useState)(!1),x=async()=>{try{m(!0),await s(),t()}finally{m(!1)}};return(0,r.jsx)(i.A,{show:e,onClose:t,title:n,size:"md",children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsx)("p",{className:"text-gray-600",children:l}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)(o.A,{variant:"outline",onClick:t,children:d}),(0,r.jsx)(o.A,{variant:"danger",onClick:x,isLoading:u,children:c})]})]})})}},5981:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(8732),a=s(6346);let i=({title:e,actions:t=[]})=>(0,r.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:e}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:t.map((e,t)=>(0,r.jsxs)(a.A,{variant:e.variant||"primary",onClick:e.onClick,className:"flex items-center gap-2",children:[e.icon&&(0,r.jsx)("span",{children:e.icon}),e.label]},t))})]})},6346:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(8732);let a=require("react-spinners"),i={primary:"bg-blue-600 hover:bg-blue-700 text-white",secondary:"bg-gray-600 hover:bg-gray-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white",outline:"bg-transparent border border-gray-300 hover:bg-gray-50 text-gray-700"},o=({variant:e="primary",isLoading:t=!1,fullWidth:s=!1,className:o="",children:n,...l})=>(0,r.jsx)("button",{className:`flex items-center justify-center px-4 py-2 rounded-md font-medium transition-colors cursor-pointer ${i[e]} ${s?"w-full":""} ${o}`,disabled:t,...l,children:t?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.ClipLoader,{size:20,color:"#ffffff",className:"mr-2"}),"Processing..."]}):n})},6715:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(8732);let a=({columns:e,data:t,emptyMessage:s="No data available",className:a=""})=>(0,r.jsx)("div",{className:`overflow-x-auto ${a}`,children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsx)("tr",{children:e.map((e,t)=>(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.header},t))})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.length>0?t.map((t,s)=>(0,r.jsx)("tr",{children:e.map((e,s)=>(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.render?e.render(t):t[e.accessor]},s))},s)):(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:e.length,className:"px-6 py-4 text-center text-sm text-gray-500",children:s})})})]})}),i=({className:e=""})=>(0,r.jsx)("div",{className:`bg-gray-200 rounded animate-pulse ${e}`,"aria-hidden":"true"}),o=({title:e,description:t,action:s})=>(0,r.jsxs)("div",{className:"text-center py-12 border rounded-lg bg-gray-50",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:e}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t}),s&&(0,r.jsx)("div",{className:"mt-6",children:s})]}),n=({products:e,isLoading:t=!1,onEdit:s,onDelete:n})=>{let l=[{header:"Kode",accessor:"code"},{header:"Nama",accessor:"name"},{header:"Kategori",accessor:"category"},{header:"Berat",accessor:"weight",render:e=>`${e.weight} kg`},{header:"Satuan",accessor:"unit_of_measurement"},{header:"Aksi",accessor:"actions",render:e=>(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:()=>s(e),className:"text-blue-600 hover:text-blue-800 transition-colors cursor-pointer","aria-label":`Edit ${e.name}`,children:"Edit"}),(0,r.jsx)("button",{onClick:()=>n(e.code),className:"text-red-600 hover:text-red-800 transition-colors cursor-pointer","aria-label":`Delete ${e.name}`,children:"Hapus"})]})}];return t?(0,r.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,r.jsx)(i,{className:"h-12 w-full"},t))}):0===e.length?(0,r.jsx)(o,{title:"Tidak ada produk",description:"Tambahkan produk pertama Anda"}):(0,r.jsx)(a,{columns:l,data:e,className:"mt-4"})}},6884:e=>{"use strict";e.exports=import("react-hook-form")},6919:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{A:()=>u});var a=s(8732),i=s(6884),o=s(8825),n=s(7137),l=s(8155),c=s(6346),d=e([i,o,n]);[i,o,n]=d.then?(await d)():d;let u=({onSubmit:e,defaultValues:t,isLoading:s})=>{let{register:r,handleSubmit:d,formState:{errors:u}}=(0,i.useForm)({resolver:(0,o.zodResolver)(n.H),defaultValues:t});return(0,a.jsxs)("form",{onSubmit:d(e),className:"space-y-4",children:[(0,a.jsx)(l.A,{label:"Kode Produk",id:"code",...r("code"),error:u.code?.message}),(0,a.jsx)(l.A,{label:"Nama Produk",id:"name",...r("name"),error:u.name?.message}),(0,a.jsx)(l.A,{label:"Deskripsi",id:"description",...r("description"),error:u.description?.message}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(l.A,{label:"Berat (kg)",id:"weight",type:"number",step:"0.01",...r("weight"),error:u.weight?.message}),(0,a.jsx)(l.A,{label:"Satuan",id:"unit_of_measurement",...r("unit_of_measurement"),error:u.unit_of_measurement?.message})]}),(0,a.jsx)(l.A,{label:"Kategori",id:"category",...r("category"),error:u.category?.message}),(0,a.jsx)("div",{className:"flex justify-end space-x-3 pt-4",children:(0,a.jsx)(c.A,{type:"submit",variant:"primary",isLoading:s,className:"w-full md:w-auto",children:"Simpan"})})]})};r()}catch(e){r(e)}})},7137:(e,t,s)=>{"use strict";s.a(e,async(e,r)=>{try{s.d(t,{H:()=>o});var a=s(2971),i=e([a]);let o=(a=(i.then?(await i)():i)[0]).z.object({code:a.z.string().min(1,"Code is required").max(100,"Name is too long"),name:a.z.string().min(1,"Name is required").max(100,"Name is too long"),description:a.z.string().max(500,"Description is too long").optional(),weight:a.z.string().min(1,"Weight is required").regex(/^\d+(\.\d+)?$/,"Must be a number"),unit_of_measurement:a.z.string().min(1,"Unit is required").max(20,"Unit is too long"),category:a.z.string().min(1,"Category is required").max(50,"Category is too long")});r()}catch(e){r(e)}})},7666:(e,t,s)=>{"use strict";s.d(t,{A:()=>o});var r=s(8732),a=s(9788),i=s.n(a);let o=({children:e,title:t="Aplikasi Produk",className:s=""})=>(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(i(),{children:[(0,r.jsx)("title",{children:t}),(0,r.jsx)("meta",{name:"description",content:"Manajemen Produk"})]}),(0,r.jsx)("div",{className:`min-h-screen bg-gray-50 ${s}`,children:(0,r.jsx)("main",{className:"container mx-auto px-4 py-8",children:e})})]})},7910:e=>{"use strict";e.exports=require("stream")},8155:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var r=s(8732);let a=(0,s(2015).forwardRef)(({label:e,error:t,className:s="",containerClassName:a="",...i},o)=>(0,r.jsxs)("div",{className:`mb-4 ${a}`,children:[e&&(0,r.jsx)("label",{htmlFor:i.id,className:"block text-sm font-medium text-gray-700 mb-1",children:e}),(0,r.jsx)("input",{ref:o,className:`w-full px-3 py-2 text-black border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ${t?"border-red-500":"border-gray-300"} ${s}`,...i}),t&&(0,r.jsx)("p",{className:"mt-1 text-sm text-red-600",children:"string"==typeof t?t:t.message})]}));a.displayName="Input";let i=a},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},8825:e=>{"use strict";e.exports=import("@hookform/resolvers/zod")},9021:e=>{"use strict";e.exports=require("fs")},9833:(e,t,s)=>{"use strict";s.d(t,{DD:()=>l,WY:()=>o,d$:()=>i,vc:()=>n});var r=s(2572);let a="http://localhost:5050/api/products",i=async e=>(0,r.G)(a,e),o=async(e,t)=>(0,r.G)(a,t,{method:"POST",body:JSON.stringify(e)}),n=async(e,t,s)=>(0,r.G)(`${a}/${e}`,s,{method:"PUT",body:JSON.stringify(t)}),l=async(e,t)=>(0,r.G)(`${a}/${e}`,t,{method:"DELETE"})},9964:e=>{"use strict";e.exports=require("nookies")}};var t=require("../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[341,678],()=>s(1279));module.exports=r})();