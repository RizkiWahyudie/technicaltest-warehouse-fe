(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{526:(e,t,a)=>{"use strict";a.d(t,{A:()=>n});var s=a(7876);let r=(0,a(4232).forwardRef)((e,t)=>{let{label:a,error:r,className:n="",containerClassName:i="",...o}=e;return(0,s.jsxs)("div",{className:"mb-4 ".concat(i),children:[a&&(0,s.jsx)("label",{htmlFor:o.id,className:"block text-sm font-medium text-gray-700 mb-1",children:a}),(0,s.jsx)("input",{ref:t,className:"w-full px-3 py-2 text-black border rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(r?"border-red-500":"border-gray-300"," ").concat(n),...o}),r&&(0,s.jsx)("p",{className:"mt-1 text-sm text-red-600",children:"string"==typeof r?r:r.message})]})});r.displayName="Input";let n=r},5293:(e,t,a)=>{"use strict";a.r(t),a.d(t,{__N_SSP:()=>O,default:()=>D});var s=a(7876),r=a(4232),n=a(7055),i=a(6037);let o="".concat("http://localhost:5050/api","/products"),l=async e=>(0,i.G)(o,e),c=async(e,t)=>(0,i.G)(o,t,{method:"POST",body:JSON.stringify(e)}),d=async(e,t,a)=>(0,i.G)("".concat(o,"/").concat(e),a,{method:"PUT",body:JSON.stringify(t)}),u=async(e,t)=>(0,i.G)("".concat(o,"/").concat(e),t,{method:"DELETE"});var m=a(6768),g=a(5682);let h="".concat("http://localhost:5050/api","/products"),x=e=>{let{showError:t,showSuccess:a}=(0,g.d)(),{data:s,error:r,mutate:n}=(0,m.Ay)(e?[h,e]:null,()=>l(e));return{products:s||[],isLoading:!s&&!r,error:r,createProduct:async s=>{try{return await c(s,e),a("Product Successfully created!"),n(),!0}catch(e){return t(e.message),!1}},updateProduct:async(s,r)=>{try{return await d(s,r,e),a("Product Successfully edited!"),n(),!0}catch(e){return t(e.message),!1}},deleteProduct:async s=>{try{return await u(s,e),a("Product Successfully deleted!"),n(),!0}catch(e){return t(e.message),!1}}}};var p=a(7328),y=a.n(p);let f=e=>{let{children:t,title:a="Aplikasi Produk",className:r=""}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(y(),{children:[(0,s.jsx)("title",{children:a}),(0,s.jsx)("meta",{name:"description",content:"Manajemen Produk"})]}),(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 ".concat(r),children:(0,s.jsx)("main",{className:"container mx-auto px-4 py-8",children:t})})]})};var b=a(9174);let v=e=>{let{title:t,actions:a=[]}=e;return(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:t}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:a.map((e,t)=>(0,s.jsxs)(b.A,{variant:e.variant||"primary",onClick:e.onClick,className:"flex items-center gap-2",children:[e.icon&&(0,s.jsx)("span",{children:e.icon}),e.label]},t))})]})},j=e=>{let{columns:t,data:a,emptyMessage:r="No data available",className:n=""}=e;return(0,s.jsx)("div",{className:"overflow-x-auto ".concat(n),children:(0,s.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,s.jsx)("thead",{className:"bg-gray-50",children:(0,s.jsx)("tr",{children:t.map((e,t)=>(0,s.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:e.header},t))})}),(0,s.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:a.length>0?a.map((e,a)=>(0,s.jsx)("tr",{children:t.map((t,a)=>(0,s.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.render?t.render(e):e[t.accessor]},a))},a)):(0,s.jsx)("tr",{children:(0,s.jsx)("td",{colSpan:t.length,className:"px-6 py-4 text-center text-sm text-gray-500",children:r})})})]})})},w=e=>{let{className:t=""}=e;return(0,s.jsx)("div",{className:"bg-gray-200 rounded animate-pulse ".concat(t),"aria-hidden":"true"})},N=e=>{let{title:t,description:a,action:r}=e;return(0,s.jsxs)("div",{className:"text-center py-12 border rounded-lg bg-gray-50",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t}),(0,s.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:a}),r&&(0,s.jsx)("div",{className:"mt-6",children:r})]})},k=e=>{let{products:t,isLoading:a=!1,onEdit:r,onDelete:n}=e,i=[{header:"Kode",accessor:"code"},{header:"Nama",accessor:"name"},{header:"Kategori",accessor:"category"},{header:"Berat",accessor:"weight",render:e=>"".concat(e.weight," kg")},{header:"Satuan",accessor:"unit_of_measurement"},{header:"Aksi",accessor:"actions",render:e=>(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{onClick:()=>r(e),className:"text-blue-600 hover:text-blue-800 transition-colors cursor-pointer","aria-label":"Edit ".concat(e.name),children:"Edit"}),(0,s.jsx)("button",{onClick:()=>n(e.code),className:"text-red-600 hover:text-red-800 transition-colors cursor-pointer","aria-label":"Delete ".concat(e.name),children:"Hapus"})]})}];return a?(0,s.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(w,{className:"h-12 w-full"},t))}):0===t.length?(0,s.jsx)(N,{title:"Tidak ada produk",description:"Tambahkan produk pertama Anda"}):(0,s.jsx)(j,{columns:i,data:t,className:"mt-4"})},S=e=>{let{show:t,onClose:a,title:n,children:i,size:o="md"}=e;return((0,r.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="auto",()=>{document.body.style.overflow="auto"}),[t]),t)?(0,s.jsxs)("div",{className:"fixed inset-0",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:a}),(0,s.jsx)("div",{className:"z-50 absolute top-2/5 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-white rounded-lg text-left overflow-hidden shadow-xl transition-all sm:my-8 sm:align-middle ".concat({sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"}[o]," w-full"),children:(0,s.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,s.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",children:n}),i]})})]}):null};var _=a(8992),A=a(3810),C=a(513);let P=C.z.object({code:C.z.string().min(1,"Code is required").max(100,"Name is too long"),name:C.z.string().min(1,"Name is required").max(100,"Name is too long"),description:C.z.string().max(500,"Description is too long").optional(),weight:C.z.string().min(1,"Weight is required").regex(/^\d+(\.\d+)?$/,"Must be a number"),unit_of_measurement:C.z.string().min(1,"Unit is required").max(20,"Unit is too long"),category:C.z.string().min(1,"Category is required").max(50,"Category is too long")});var E=a(526);let z=e=>{var t,a,r,n,i,o;let{onSubmit:l,defaultValues:c,isLoading:d}=e,{register:u,handleSubmit:m,formState:{errors:g}}=(0,_.mN)({resolver:(0,A.u)(P),defaultValues:c});return(0,s.jsxs)("form",{onSubmit:m(l),className:"space-y-4",children:[(0,s.jsx)(E.A,{label:"Kode Produk",id:"code",...u("code"),error:null==(t=g.code)?void 0:t.message}),(0,s.jsx)(E.A,{label:"Nama Produk",id:"name",...u("name"),error:null==(a=g.name)?void 0:a.message}),(0,s.jsx)(E.A,{label:"Deskripsi",id:"description",...u("description"),error:null==(r=g.description)?void 0:r.message}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsx)(E.A,{label:"Berat (kg)",id:"weight",type:"number",step:"0.01",...u("weight"),error:null==(n=g.weight)?void 0:n.message}),(0,s.jsx)(E.A,{label:"Satuan",id:"unit_of_measurement",...u("unit_of_measurement"),error:null==(i=g.unit_of_measurement)?void 0:i.message})]}),(0,s.jsx)(E.A,{label:"Kategori",id:"category",...u("category"),error:null==(o=g.category)?void 0:o.message}),(0,s.jsx)("div",{className:"flex justify-end space-x-3 pt-4",children:(0,s.jsx)(b.A,{type:"submit",variant:"primary",isLoading:d,className:"w-full md:w-auto",children:"Simpan"})})]})},T=e=>{let{show:t,onClose:a,product:n,onSave:i}=e,[o,l]=(0,r.useState)(!1),c=async e=>{try{l(!0),await i(e),a()}finally{l(!1)}};return(0,s.jsx)(S,{show:t,onClose:a,title:n?"Edit Produk":"Tambah Produk",size:"lg",children:(0,s.jsx)(z,{onSubmit:c,defaultValues:n||void 0,isLoading:o})})},L=e=>{let{show:t,onClose:a,onConfirm:n,title:i,message:o,confirmText:l="Hapus",cancelText:c="Batal"}=e,[d,u]=(0,r.useState)(!1),m=async()=>{try{u(!0),await n(),a()}finally{u(!1)}};return(0,s.jsx)(S,{show:t,onClose:a,title:i,size:"md",children:(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("p",{className:"text-gray-600",children:o}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,s.jsx)(b.A,{variant:"outline",onClick:a,children:c}),(0,s.jsx)(b.A,{variant:"danger",onClick:m,isLoading:d,children:l})]})]})})};var O=!0;function D(e){let{token:t}=e,{logout:a}=(0,n.A)(),{showError:i}=(0,g.d)(),{products:o,isLoading:l,createProduct:c,updateProduct:d,deleteProduct:u}=x(t),[m,h]=(0,r.useState)(!1),[p,y]=(0,r.useState)(null),[b,j]=(0,r.useState)(!1),[w,N]=(0,r.useState)(null),S=async e=>{try{p?await d(p.code,e):await c(e),h(!1)}catch(e){i(e.message||"Failed to save product")}},_=async()=>{try{w&&(await u(w),j(!1))}catch(e){i(e.message||"Failed to delete product")}};return(0,s.jsxs)(f,{children:[(0,s.jsx)(v,{title:"Daftar Produk",actions:[{label:"Tambah Produk",onClick:()=>{y(null),h(!0)},variant:"primary"},{label:"Logout",onClick:a,variant:"danger"}]}),(0,s.jsx)(k,{products:o,isLoading:l,onEdit:e=>{y(e),h(!0)},onDelete:e=>{N(e),j(!0)}}),(0,s.jsx)(T,{show:m,onClose:()=>h(!1),product:p,onSave:S}),(0,s.jsx)(L,{show:b,onClose:()=>j(!1),onConfirm:_,title:"Hapus Produk",message:"Apakah Anda yakin ingin menghapus produk ".concat(w,"?")})]})}},5682:(e,t,a)=>{"use strict";a.d(t,{d:()=>n});var s=a(4301);let r={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0},n=()=>({showSuccess:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s.oR.success(e,{...r,...t})},showError:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s.oR.error(e,{...r,...t})},showInfo:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s.oR.info(e,{...r,...t})},showWarning:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};s.oR.warn(e,{...r,...t})}})},6037:(e,t,a)=>{"use strict";a.d(t,{G:()=>s});let s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s={"Content-Type":"application/json"};t&&(s.Authorization="Bearer ".concat(t));let r=await fetch(e,{...a,headers:{...s,...a.headers}}),n=await r.json();if(!r.ok)throw Error(n.message||"An error occurred");return n}},6760:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return a(5293)}])},7055:(e,t,a)=>{"use strict";a.d(t,{A:()=>c});var s=a(4232),r=a(9099),n=a(3422),i=a(6037);let o=async e=>(0,i.G)("".concat("http://localhost:5050/api","/auth/login"),"",{method:"POST",body:JSON.stringify(e)});var l=a(5682);let c=()=>{let[e,t]=(0,s.useState)(!1),a=(0,r.useRouter)(),{showSuccess:i,showError:c}=(0,l.d)();return{login:async e=>{t(!0);try{let{token:t}=await o(e);(0,n.setCookie)(null,"token",t,{maxAge:86400,path:"/"}),i("Login successful!"),a.push("/")}catch(e){c(e.message||"Login failed")}finally{t(!1)}},logout:()=>{(0,n.destroyCookie)(null,"token"),a.push("/login")},isLoading:e}}},9174:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(7876),r=a(1923);let n={primary:"bg-blue-600 hover:bg-blue-700 text-white",secondary:"bg-gray-600 hover:bg-gray-700 text-white",danger:"bg-red-600 hover:bg-red-700 text-white",outline:"bg-transparent border border-gray-300 hover:bg-gray-50 text-gray-700"},i=e=>{let{variant:t="primary",isLoading:a=!1,fullWidth:i=!1,className:o="",children:l,...c}=e;return(0,s.jsx)("button",{className:"flex items-center justify-center px-4 py-2 rounded-md font-medium transition-colors cursor-pointer ".concat(n[t]," ").concat(i?"w-full":""," ").concat(o),disabled:a,...c,children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.A,{size:20,color:"#ffffff",className:"mr-2"}),"Processing..."]}):l})}}},e=>{var t=t=>e(e.s=t);e.O(0,[302,768,636,593,792],()=>t(6760)),_N_E=e.O()}]);